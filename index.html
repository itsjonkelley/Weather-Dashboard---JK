<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- bootstrap css and script src  -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- personal css sheet  -->
    <link rel="stylesheet" href="style.css">



</head>

<body>
    <header>
        <h1>Weather Dashboard</h1>
    </header>
    <div class="container">
        <div class="row">
            <div class="col-3">
                <!-- seach section -->
                <h5>Search for a city:</h5>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                    </div>
                    <!-- search input section -->
                    <div>
                        <input type="text" id="city-input" class="form-control" aria-label="Sizing example input"
                            aria-describedby="inputGroup-sizing-default" placeholder="ex: Atlanta">
                    </div>
                    <div>
                        <input type="text" id="city-state" class="form-control" aria-label="Sizing example input"
                            aria-describedby="inputGroup-sizing-default" placeholder="ex: GA">
                    </div>
                    <!-- seach button click -->
                    <input class="btn btn-primary" id="find-city" type="button" value="Search">
                </div>
                <!-- search history of previous cities inputed -->
                <div class="list-group" id="list-tab" role="tablist">
                    <a class="list-group-item list-group-item-action active" id="list-home-list" data-toggle="list"
                        href="#list-home" role="tab" aria-controls="home">City 1</a>
                    <a class="list-group-item list-group-item-action" id="list-profile-list" data-toggle="list"
                        href="#list-profile" role="tab" aria-controls="profile">City 2</a>
                    <a class="list-group-item list-group-item-action" id="list-messages-list" data-toggle="list"
                        href="#list-messages" role="tab" aria-controls="messages">City 3</a>
                    <a class="list-group-item list-group-item-action" id="list-settings-list" data-toggle="list"
                        href="#list-settings" role="tab" aria-controls="settings">City 4</a>
                    <a class="list-group-item list-group-item-action" id="list-profile-list" data-toggle="list"
                        href="#list-profile" role="tab" aria-controls="profile">City 5</a>
                    <a class="list-group-item list-group-item-action" id="list-messages-list" data-toggle="list"
                        href="#list-messages" role="tab" aria-controls="messages">City 6</a>
                    <a class="list-group-item list-group-item-action" id="list-settings-list" data-toggle="list"
                        href="#list-settings" role="tab" aria-controls="settings">City 7</a>
                </div>

            </div>
            <div class="col-9">
                <container id="currentContainer">
                    <!-- Output from JSON function -->
                    <div>
                        <div class="city"></div>
                        <div class="currentDay"></div>
                        <div class="weatherIcon"></div>
                    </div>
                    <br>
                    <div class="temp"></div>
                    <br>
                    <div class="humidity"></div>
                    <br>
                    <div class="wind"></div>
                    <br>
                    <div class="uvIndex"></div>
                    <div class="longitude"></div>
                    <div class="latitude"></div>
                </container>
                <container id="forecastContainer">

                </container>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">
            //variable for current date
            var currentDate = moment().format('MMMM Do YYYY');
            
            $(document).ready(function () {
                // This .on("click") function will trigger the AJAX Call
                $("#find-city").on("click", function (event) {

                    event.preventDefault();

                    // Here we grab the text from the input box
                    var cityName = $("#city-input").val();
                    var stateName = $("#state-input").val();

                    // variables to support UAV and forecast
                    var long = $(".longitude");
                    var lat = $(".latitude");



                    // Here we construct our URL
                    var queryURLCurrent = "https://api.openweathermap.org/data/2.5/weather?q=" + cityName + "," + stateName + "&appid=7d5b8bfa6cf34723bc885e549d3a2702&units=imperial";
                    var queryURLUV = "http://api.openweathermap.org/data/2.5/uvi?appid=7d5b8bfa6cf34723bc885e549d3a2702&lat=" + lat + "&lon=" + long + "";


                    // ------YOUR CODE GOES IN THESE DASHES. DO NOT MANUALLY EDIT THE HTML ABOVE.

                    $.ajax({
                        url: queryURLCurrent,
                        method: "GET"
                    })
                        .then(function (response) {
                            console.log(queryURLCurrent);
                            console.log(response);

                            // Transfer content to HTML
                            $(".city").html("<h1>" + response.name + "</h1>"+"<h3> (" + currentDate + ") </h3");
                            $(".temp").text("Temperature: " + response.main.temp + ' degrees Fahrenheit')
                            $(".humidity").text("Humidity: " + response.main.humidity + "%");
                            $(".wind").text("Wind Speed: " + response.wind.speed + " MPH");

                            $(".longitude") = response.coord.lon;
                            $(".latitude") = response.coord.lat;

                        });


                    $.ajax({
                        url: queryURLUV,
                        method: "GET"
                    })
                        .then(function (response) {
                            console.log(queryURLUV);
                            console.log(response);


                            // Transfer content to HTML
                            $(".uvIndex").text("UV Index: " + response.value);


                        });
                });
            });
        </script>


</body>

</html>